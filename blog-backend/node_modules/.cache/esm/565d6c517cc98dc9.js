let jwt;_7cc‍.x([["default",()=>_7cc‍.o]]);_7cc‍.w("jsonwebtoken",[["default",["jwt"],function(v){jwt=v}]]);

// 사용자의 토큰을 확인 후 검증하는 미들웨어

const jwtMiddleware = (ctx, next) => {
  const token = ctx.cookies.get('access_token');
  if (!token) return next(); // 토큰이 없음

  try {
    const decoded = jwt.verify(token, process.env.JWT_SECRET);
    // ctx.state.user = {
    //   _id: decoded._id,
    //   username: decoded.username,
    // };
    _7cc‍.g.console.log(decoded);
    return next();
  } catch (e) {
    // 토큰 검증 실패
    return next();
  }
};

_7cc‍.d(jwtMiddleware);
